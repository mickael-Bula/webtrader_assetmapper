/* Variables CSS pour un thème sombre et cohérent */
:root {
    --color-background-primary: #121212; /* Fond très sombre */
    --color-background-secondary: #1E1E1E; /* Fond des cartes/éléments */
    --color-background-drawer: #252525; /* Fond du menu latéral */
    --color-text-primary: #E0E0E0; /* Texte clair */
    --color-text-muted: #A0A0A0; /* Texte secondaire/gris */
    --color-header: #00897B; /* Teal foncé pour l'application bar */
    --color-primary: #4CAF50; /* Vert pour les actions/succès */
    --color-danger: #D84315; /* Rouge pour les alertes/attente/erreur */
    --color-info: #0277BD; /* Bleu pour les headers de tableau */
    --color-shadow: rgba(0, 0, 0, 0.4); /* Ombre sombre */
    --border-radius: 8px;
    --drawer-width: 280px;
}

/* -------------------------------------- */
/* 0. Base et Utilitaires */
/* -------------------------------------- */

body {
    background-color: var(--color-background-primary);
    color: var(--color-text-primary);
    font-family: 'Roboto Variable', sans-serif;
    margin: 0;
    padding: 0;
    line-height: 1.6;
    transition: margin-left 0.3s ease; /* Pour le décalage potentiel du contenu */
}

/* Utilitaires de flexbox (traduction des classes Vuetify) */
.d-flex { display: flex; }
.align-start { align-items: flex-start; }
.align-center { align-items: center; }
.justify-start { justify-content: flex-start; }
.align-right { text-align: right !important; }
.align-center { text-align: center !important; }

/* -------------------------------------- */
/* 1. Layout Principal (v-app) */
/* -------------------------------------- */

.app-layout {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

.app-main {
    flex-grow: 1;
    padding: 20px;
}

.dashboard-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 10px;
}

/* -------------------------------------- */
/* 2. Header (v-app-bar) */
/* -------------------------------------- */

.app-header {
    background-color: var(--color-header);
    box-shadow: 0 2px 4px var(--color-shadow);
    color: white;
    height: 64px;
    position: sticky;
    top: 0;
    z-index: 610; /* Augmenté à 610 pour être plus grand que navigation-drawer (600) */
}

.header-content {
    display: flex;
    align-items: center;
    padding: 0 16px;
    height: 100%;
}

.toolbar-title {
    font-size: 1.25rem;
    font-weight: 500;
    margin-left: 16px;
}

.spacer {
    flex-grow: 1;
}

.icon-btn {
    background: none;
    border: none;
    color: white;
    padding: 12px;
    cursor: pointer;
    border-radius: 50%;
    transition: background-color 0.2s;
}

.icon-btn i {
    font-size: 1.5rem;
}

.icon-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

/* --- Couleurs de bascule pour l'icône --- */

/* Couleur par défaut (Vert) */
.icon-on {
    color: #64DD17; /* Light Green light-green-accent-4 de la palette MDI */
}

/* Couleur alternative (Orange) */
.icon-off {
    color: #FF7043; /* Deep Orange deep-orange-lighten-1 de la palette MDI */
}

.icon-btn svg {
    width: 1.5rem;
    height: 1.5rem;
    fill: currentColor; /* Permet d'hériter de la couleur définie par .icon-red ou .icon-green */
    transition: color 0.3s ease; /* Ajoute une transition pour un effet plus doux */
}

/* Retire la couleur blanche du style initial */
.icon-btn.login-btn {
}

/* -------------------------------------- */
/* 3. Menu latéral (v-navigation-drawer) */
/* -------------------------------------- */

.navigation-drawer {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: var(--drawer-width);
    background-color: var(--color-background-drawer);
    box-shadow: 2px 0 10px var(--color-shadow);
    z-index: 600;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    padding-top: 64px; /* Sous l'app-bar */
}

/* État 'drawer-open' simulé via JS */
body.drawer-open .navigation-drawer {
    transform: translateX(0);
}

/* Overlay lorsque le menu est ouvert (style 'temporary') */
body.drawer-open .app-main::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5); /* Overlay */
    z-index: 550;
    cursor: pointer;
}

.drawer-header {
    padding: 16px;
    font-size: 1.1rem;
    color: var(--color-text-muted);
}

.list-compact {
    list-style: none;
    padding: 0;
    margin: 0;
}

.list-item-title {
    font-weight: 500;
}

.list-item a.list-link {
    display: flex;
    align-items: center;
    padding: 10px 16px;
    text-decoration: none;
    color: var(--color-text-primary);
    transition: background-color 0.2s;
}

.list-item a.list-link:hover {
    background-color: rgba(255, 255, 255, 0.08);
}

.list-item a.list-link.active {
    background-color: rgba(76, 175, 80, 0.1);
    color: var(--color-primary);
}

.list-icon {
    margin-right: 16px;
    font-size: 1.5rem;
}

.icon-green {
    color: var(--color-primary);
}

/* -------------------------------------- */
/* 4. Layout du Contenu - STRUCTURE 50/50 */
/* -------------------------------------- */

.main-content-row {
    display: flex;
    gap: 20px; /* Espace entre les deux colonnes (Gauche/Droite) */
}

.col-left, .col-right {
    flex: 0 0 calc(50% - 10px); /* Chacun occupe 50% de l'espace moins 10px pour laisser un gap total de 20px */
    display: flex; /* Permet d'empiler les éléments verticalement */
    flex-direction: column;
    gap: 20px; /* Espace entre les groupes d'éléments (Cards/Table et Boxes/Positions) */
}

/* --- COLONNE GAUCHE : Cards (1/3 chacune) + Data Table --- */

.row-header {
    /* Contient les 3 cartes */
    width: 100%;
    gap: 15px;
    margin-bottom: 0;
}

.col-card {
    /* Chaque carte prend 1/3 de l'espace moins les gaps */
    flex: 1 1 33.333%;
}

.col-button {
    /* Le bouton prend juste l'espace nécessaire */
    flex-grow: 0;
    flex-shrink: 0;
}

.row-table {
    /* Assure que le tableau prend la pleine largeur restante */
    flex-grow: 1;
}

.col-table {
    /* Le conteneur du tableau doit occuper 100% de .row-table */
    flex: 0 0 100%;
}

/* --- COLONNE DROITE : Image + Positions (2/3) --- */

.image-box {
    /* Ligne 1: Image - Pleine largeur de .col-right (50% de la page) */
    width: 100%;
    height: 400px; /* Hauteur fixe souhaitée */
    overflow: hidden;
    border-radius: var(--border-radius);
    background-color: var(--color-background-secondary);
}

.full-width-image {
    /* Style pour l'image à l'intérieur de image-box */
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.row-positions-spacer {
    /* Ligne 2 : Positions (2/3) + Espace vide (1/3) */
    width: 100%;
    gap: 20px;
    flex-grow: 1; /* Permet à cette ligne d'occuper l'espace vertical restant */
}

.col-positions-wrap {
    /* Conteneur des positions occupe 2/3 de la largeur de .col-right */
    flex: 0 0 66.666%;
}

.col-spacer {
    /* L'espace vide occupe 1/3 */
    flex: 0 0 33.333%;
}

.col-positions {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 20px; /* Espace entre les deux tableaux de positions */
}

/* -------------------------------------- */
/* 5. Cartes (v-card) */
/* -------------------------------------- */

.card {
    background-color: var(--color-background-secondary);
    border-radius: var(--border-radius);
    box-shadow: 0 4px 12px var(--color-shadow);
    transition: box-shadow 0.3s ease;
}

.card:hover {
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.6);
}

.card-small {
    height: 100px;
    padding: 10px;
}

.card-title {
    font-size: 1rem;
    font-weight: 500;
    color: var(--color-text-muted);
    margin-bottom: 5px;
}

.card-metrics {
    display: flex;
    align-items: center;
    padding: 0;
    margin-top: 5px;
}

.text-h6 {
    font-size: 1.25rem;
    font-weight: 600;
}

.text-body-2 {
    font-size: 0.875rem;
}

.text-muted {
    color: var(--color-text-muted);
}

.px-6 {
    padding-left: 1rem;
    padding-right: 1rem;
}

.icon {
    font-size: 1.5rem;
    margin-left: 10px;
    margin-right: 5px;
}

.icon-up { color: var(--color-primary); }
.icon-down { color: var(--color-danger); }

/* -------------------------------------- */
/* 6. Bouton (v-btn) */
/* -------------------------------------- */

.btn {
    padding: 10px 15px;
    border-radius: var(--border-radius);
    font-weight: bold;
    cursor: pointer;
    border: none;
    transition: background-color 0.3s;
    text-transform: uppercase;
}

.btn-primary {
    background-color: var(--color-info);
    color: white;
    box-shadow: 0 2px 4px var(--color-shadow);
}

.btn-primary:hover {
    background-color: #03A9F4;
}

.icon-left {
    margin-right: 8px;
    font-size: 18px;
}

/* -------------------------------------- */
/* 7. Tableau de données (v-data-table) */
/* -------------------------------------- */

/* IMPORTANT : On applique le border-radius au conteneur pour l'ombre/arrondi */
.data-table-container {
    overflow-x: auto;
    border-radius: var(--border-radius);
}

.data-table {
    width: 100%;
    border-collapse: collapse;
    background-color: var(--color-background-secondary);
}

.elevation-5 {
    box-shadow: 0 8px 16px var(--color-shadow);
}

.data-table th, .data-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #333;
}

.data-table thead th {
    background-color: var(--color-info);
    color: white;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.8rem;
}

/* Arrondir les coins de l'en-tête (pour corriger le problème de border-radius) */
.data-table thead tr:first-child th:first-child {
    border-top-left-radius: var(--border-radius);
}

.data-table thead tr:first-child th:last-child {
    border-top-right-radius: var(--border-radius);
}


/* Groupe d'en-tête */
.table-header-group {
    background-color: var(--color-info);
    text-align: center !important;
    border: 1px solid #1e5a88;
    border-top: none;
    padding: 5px 0;
}

/* Effet hover */
.data-table tbody tr:hover {
    background-color: #2a2a2a;
}

/* -------------------------------------- */
/* 8. Positions */
/* -------------------------------------- */

.position-card {
    margin-bottom: 20px;
    width: 100%;
}

.position-header-running {
    background-color: var(--color-primary);
    color: white;
    padding: 10px 15px;
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
    font-weight: bold;
}

.position-header-waiting {
    background-color: var(--color-danger);
    color: white;
    padding: 10px 15px;
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
    font-weight: bold;
}

.card-divider {
    height: 1px;
    background-color: #333;
}

.position-table {
    width: 100%;
    border-collapse: collapse;
}

.position-table th, .position-table td {
    padding: 8px 10px;
    text-align: left;
    font-size: 0.85rem;
    border-bottom: 1px solid #2a2a2a;
}

.position-table thead th {
    background-color: #333;
    color: var(--color-text-primary);
    font-weight: normal;
    font-size: 0.75rem;
    text-transform: uppercase;
}

.edit-icon {
    font-size: 1rem;
    color: var(--color-text-muted);
    cursor: pointer;
    transition: color 0.2s;
}

.edit-icon:hover {
    color: var(--color-primary);
}

/* -------------------------------------- */
/* 9. Notification (Alerte) */
/* -------------------------------------- */
.notification-area {
    width: 100%;
    margin-bottom: 15px;
}

.notification {
    width: 100%;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: bold;
    border-radius: var(--border-radius);
    color: white;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.notification-text {
    flex-grow: 1;
    text-align: left;
}

.close-btn {
    background: none;
    border: none;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    color: inherit;
    padding: 0 10px;
}

/* ---------------------------------------- */
/* 11. Onglets pour afficher les graphiques */
/* ---------------------------------------- */
.tab-btn {
    background: #2c2c2c;
    color: #888;
    border: none;
    padding: 8px 16px;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.3s;
}

.tab-btn.active {
    color: #4CAF50; /* Vert trading */
    border-bottom: 2px solid #4CAF50;
    background: #333;
}

.tab-btn:hover {
    background: #383838;
}

/* -------------------------------------- */
/* Adaptation Mobile                      */
/* -------------------------------------- */
@media (max-width: 900px) {
    .main-content-row, .row-header, .row-boxes, .row-positions-spacer {
        flex-direction: column;
        gap: 10px;
    }
    .col-left, .col-right, .col-card, .col-table, .col-positions-wrap, .col-spacer {
        width: 100%;
        max-width: 100%;
        flex: 1 1 100% !important; /* Force le mode empilement */
    }
    .col-button {
        width: 100%;
        justify-content: center;
    }
    .btn-primary {
        width: 100%;
    }
    .data-table-container {
        overflow-x: scroll;
    }
}
